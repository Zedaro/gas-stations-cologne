<!DOCTYPE html>
<html>
<head>
    <title>Simple Map</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>
    <script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
    <style>
        html, body, #map, #list {
            height:100%;
            width:100%;
            margin:0;
            padding:0;
            border:0;
        }

        #map, #list {
            height:90%;
        }

        #toggle {
            height:10%;
        }

        #mapBtn, #listBtn {
            margin:0;
            box-sizing:border-box;
            height:100%;
            width:50%;
            border:0;
            outline:0;
        }
    </style>
</head>
<body>
	
<div id="toggle"><button id="mapBtn">Map</button><button id="listBtn">List</button></div>
<div id="map"></div>
<div id="list">
    <ul></ul>
</div>

<script>
    $(document).ready(function () {
        var map = document.getElementById('map'),
            list = document.getElementById('list'),
            listUl = list.querySelector('ul'),
            mapBtn = document.getElementById('mapBtn'),
            listBtn = document.getElementById('listBtn');
        var mapObject;

        function toggleHandler(toggle) {
            if (toggle) {
                styleHandler(map, mapBtn, list, listBtn);
            } else {
                styleHandler(list, listBtn, map, mapBtn);
            }
        }

        function styleHandler(block, blockBtn, none, noneBtn) {
            none.style.display = 'none';
            noneBtn.style.backgroundColor = '#ccc';
            block.style.display = 'block';
            blockBtn.style.backgroundColor = '#666';
        }

        function init() {
            toggleHandler(true);
            mapBtn.addEventListener('click', toggleHandler.bind(null, true));
            listBtn.addEventListener('click', toggleHandler.bind(null, false));

            mapObject = L.map('map').setView([50.937231, 6.960279], 16);

            L.tileLayer('http://{s}.tiles.koeln.de/tiles/kde/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(mapObject);

            var url = 'http://127.0.0.1:5500/gas_stations.json';

            $.ajax({
                url: url,
                dataType: "json",
            }).done(function (data) {
                $.each(data.features, addItem);
            });
        }

        function addItem(index, value) {
            var name = value.attributes.adresse;
            var longitude = value.geometry.y;
            var latitude = value.geometry.x;

            L.marker([longitude, latitude]).addTo(mapObject)
                .bindPopup(name);

            listEl = document.createElement('li');
            text = document.createTextNode('Name: ' + name);
            listEl.appendChild(text);
            listUl.appendChild(listEl);
        }

        init();
    });
</script>
</body>
</html>